<html>
<head>
	<meta charset="utf-8">
    <script src="jquery-3.1.1.min.js"></script>
	
	<style>
		body{
			background-color:#000080;
			font-size:24px;
			color: #FFFFFF;
		} 
		a {
			color: #FFFFFF;
		}
		ul {
			padding: 0;
			list-style-type: none;
		}
	</style>
</head>

<!--<body style="background-color:#000080;color:#ffffff;">-->
<body>
<div id=loadingBlock style="text-align:center">
	Идёт загрузка...
</div>

<div id=mainBlock style="text-align:center;display:none;">
	<ul>

	</ul>
</div>

<div id=gameNameBlock style="text-align:center;">
	
</div>

<script>
var games;

function showGame(game){
	$("#gameNameBlock").html("<a target=_blank href=http://www.old-games.ru"+game.Url+">"+game.Name+" ("+game.Year+")</a>");
}

function getGamesByYears(yearFrom, yearTo) {
	return games.filter(function(x){return x.Year >= yearFrom && x.Year <= yearTo});
}

function getGamesByYear(year) {
	return games.filter(function(x){return x.Year==i});
}

function getRandomItem(items){
	var item = items[Math.floor(Math.random()*items.length)];
	return item;
}

$(function() {
	  $.ajax({
		url: 'https://newbilius.github.io/Old-Games_DOS_Game_Gauntlet/GAMES.json',
		dataType: 'json',
		success: function( data ) {
					games = data;
					$("#loadingBlock").hide();
					$("#mainBlock").show();
		},
		error: function( data ) {
					$("#loadingBlock").html("Ошибка деления на огурец. Пожалуйста, перезагрузите страницу и&nbsp;проверьте наличие сети.");
		}
	  });

	var years = [
		{yearFrom:1998, yearTo:2003},
		{yearFrom:1996, yearTo:1997},
		{yearFrom:1994, yearTo:1995},
		{yearFrom:1991, yearTo:1993},
		{yearFrom:1989, yearTo:1990},
		{yearFrom:1987, yearTo:1988},
		{yearFrom:1981, yearTo:1986},
		];
		
	var listItem = $("#mainBlock ul");
	for (index = 0, len = years.length; index < len; ++index) {
		var yearFrom = years[index].yearFrom;
		var yearTo = years[index].yearTo;
		
		listItem.append("<li><a href=# onclick='showGame(getRandomItem(getGamesByYears("+yearFrom+","+yearTo+")))'>"+yearFrom+"-"+yearTo+"</a></li>");
	}
});
</script>
</body>
</html>